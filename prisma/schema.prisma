// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
  output   = "./generated/prisma"
}

datasource db {
  provider = "sqlite"
  url      = env("DATABASE_URL")
}

model Match {
  id        String    @id @default(uuid())
  createdAt DateTime  @default(now())
  map       String
  rounds    Round[]
  players   Player[]
}

model Round {
  id        String    @id @default(uuid())
  number    Int
  winner    String    // 'T' or 'CT'
  winMethod String
  match     Match     @relation(fields: [matchId], references: [id])
  matchId   String
  events    Event[]
}

model Event {
  id         String    @id @default(uuid())
  type       String    // "kill", "flash", "grenade", etc.
  timestamp  DateTime
  description String
  round      Round     @relation(fields: [roundId], references: [id])
  roundId    String
}

model Player {
  id        String    @id @default(uuid())
  name      String
  steamId   String
  team      String     // "T" or "CT"
  match     Match      @relation(fields: [matchId], references: [id])
  matchId   String
}
